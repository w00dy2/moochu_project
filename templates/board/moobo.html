{% extends 'base.html' %}
{% block title %}post{% endblock %}
{% load static %}

{% block content %}
    <link rel="stylesheet" href="{% static 'board.css' %}">

    <div class="container">
        {% csrf_token %}
        <h3><a href="{% url 'board:moobo' %}" style="text-decoration-line: underline; text-decoration-style: double; text-underline-offset : 5px;">MooChu Board</a></h3>
        <ul class="board-menu">
            <li><a href="{% url 'board:moobo' %}">Board</a></li>
            <li><a href="{% url 'board:post' %}">Upload</a></li>
            {% if user.id %}
                <li><a href="{% url 'board:my_posts' user.id %}">My Posts</a></li>
            {% endif %}
        </ul>
    </div>

    <div class="container my-3">
        <!-- <div class="col-2">
            <select class="form-control so">
                <option value="recent" {% if so == 'recent' %}selected{% endif %}>ìµœì‹ ìˆœ</option>
                <option value="recommend" {% if so == 'recommend' %}selected{% endif %}>ì¶”ì²œìˆœ</option>
                <option value="popular" {% if so == 'popular' %}selected{% endif %}>ì¸ê¸°ìˆœ</option>
            </select>
        </div> -->
        <!-- <div class="col-2 input-group">
            <input type="text" class="form-control grayed-input" placeholder="ğŸ”">
            <div class="input-group-append">
                <button class="btn btn-search" type="button" id="btn_search">ê²€ìƒ‰</button>
            </div>
        </div>
        <br>
         -->
        <table class="table">
            <thead>
            <tr class="table-dark">
                <th class="col-num">ë²ˆí˜¸</th>
                <th class="col-title" style="text-align: center;">ì œëª©</th>
                <th class="col-writer">ì‘ì„±ì</th>
                <th class="col-date">ì‘ì„±ì¼ì‹œ</th>
                <th class="col-count">ì¡°íšŒìˆ˜</th>
                <th class="col-count">ì¶”ì²œìˆ˜</th>
                </tr>
            </thead>
            <tbody>
                {% if post_list %}
                {% for post in post_list %}
                <tr>
                    <td class="col-num">{{ forloop.counter }}</td>
                    <td>
                        <a class="title" href="{% url 'board:post_detail' post.id %}">
                            {{ post.title }}
                            <span class="comment-count2">
                                ({{ post.comments.count|default_if_none:"0" }})
                            </span>
                        </a>
                    </td>
                    
                    <td class="col-writer">{{ post.writer }}</td>
                    <td class="col-date">{{ post.create_date|date:"Yë…„ mì›” dì¼" }}</td>
                    <td class="col-count">{{ post.n_hit}}</td> 
                    <td class="col-count">{{ post.voter.all.count }}</td>
                </tr>
            {% endfor %}
            {% else %}
            <tr>
                <td colspan="6">ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</td>
            </tr>
            {% endif %}     
            </tbody>

        </table>
    </div>
    {% endblock %}